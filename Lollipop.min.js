/*
 MIT <http://szanata.com/mit.txt>
 @license GPL <http://szanata.com/gpl.txt>
 @author St√©fano Stypulkowski <http://szanata.me>
 @hosted Github <http://github.com/madeinstefano/Lollipop>
 @version 1.0.3
 @require jquery 1.8+
 @compatible FF 3.5+
 @compatible Google Chrome 3+
 @compatible IE 6+
 @compatible Opera 10+
 @compatible Safari 5+
*/
var Lollipop=window.Lollipop={};
(function(){function f(b){var a={},d;for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}function g(){var b=($(window).width()-$("#lollipop-popup").outerWidth())/2,a=($(window).height()-$("#lollipop-popup").outerHeight())/2;$("#lollipop-popup").css({left:0>b?0:b,top:0>a?0:a})}function h(){b.height(0).width(0).height($(document).height()<$(window).height()?$(window).height():$(document).height()).width($(document).width()<$(window).width()?$(window).width():$(document).width())}function j(c,a){b.find("#lollipop-popup-footer").append($("<button></button>").text(c).on("click",
a))}function k(){b.find("#lollipop-popup").css("padding-bottom",b.find("#lollipop-popup-footer:visible").size()?b.find("#lollipop-popup-footer").outerHeight(!0):0);h();g();$(window).add("html, body").scrollTop(0).scrollLeft(0).on("scroll.lollipop",function(){var c=b.find("#lollipop-popup").outerWidth(!0),a=b.find("#lollipop-popup").outerHeight(!0);c<$(window).width()?$(window).scrollLeft(0):c<$(window).width()+$(window).scrollLeft()&&$(window).scrollLeft(c-$(window).width());a<$(window).height()?
$(window).scrollTop(0):a<$(window).height()+$(window).scrollTop()&&$(window).scrollTop(a-$(window).height())});$(window).on("resize.lollipop",function(){h();g()})}var e={minWidth:400,maxWidth:500,width:null,minHeight:200,maxHeight:400,height:null,animate:!0,title:null,showHeader:!0,showFooter:!0,showCancelButton:!0,cancelButtonTitle:"Cancel",onCancel:null,content:null,onBeforeOpen:null,onOpen:null,onClose:null,buttons:[]},l=f(e),b=$("<div></div>").css({position:"absolute",top:"0px",left:"0px",right:"0px",
zIndex:9999}).append($('<div id="lollipop-block-layer"></div>').css({position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"}),$('<div id="lollipop-popup"></div>').css({maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:e.minHeight,position:"absolute"}).append($('<div id="lollipop-popup-header"></div>').css({textOverflow:"ellipsis",overflow:"hidden"}),$('<div id="lollipop-popup-body"></div>'),$('<div id="lollipop-popup-footer"></div>').css({position:"absolute",bottom:"0px",
left:"0px",right:"0px"})));Object.freeze&&Object.freeze(e);Lollipop.seeDefaults=function(){return f(e)};Lollipop.config=function(b){$.extend(l,e,b)};Lollipop.open=function(c){var a={};$.extend(a,l,c);b.find("#lollipop-popup").css({maxWidth:a.maxWidth||"auto",maxHeight:a.maxHeight||"auto",minWidth:a.minWidth||"auto",minHeight:a.minHeight||"auto",width:a.width||"auto",height:a.height||"auto"});a.showHeader&&a.title?b.find("#lollipop-popup-header").show().html(a.title):b.find("#lollipop-popup-header").hide();
b.find("#lollipop-popup-body").html("");b.find("#lollipop-popup-body").append(a.content);b.data("__closeCallback",a.onClose);var d=$("<div></div>").css({clear:"both",width:0,height:0});b.find("#lollipop-popup-body").append(d);if(!a.showFooter||(!a.buttons||0===a.buttons.length)&&!a.showCancelButton)b.find("#lollipop-popup-footer").empty().hide();else{b.find("#lollipop-popup-footer").empty().show();if(a.buttons)for(var d=0,e=a.buttons.length;d<e;d++)j(a.buttons[d].title,a.buttons[d].click);a.showCancelButton&&
(j(a.cancelButtonTitle,function(){if("function"===typeof a.onCancel)a.onCancel();Lollipop.close()}),$(window).on("keydown.lollipop",function(b){if(27===b.keyCode){if("function"===typeof a.onCancel)a.onCancel();Lollipop.close()}}))}b.hide().appendTo($("body"));"function"===typeof c.onBeforeOpen&&c.onBeforeOpen.call(b[0]);a.animate?b.css("visibility","hidden").show(0,function(){k();b.hide().css("visibility","visible").fadeIn(function(){"function"===typeof c.onOpen&&c.onOpen.call(this)})}):b.show(0,
function(){k();"function"===typeof c.onOpen&&c.onOpen.call(this)})};Lollipop.close=function(c){c?(b.find("#lollipop-popup-body").html(""),b.detach()):b.fadeOut(function(){b.find("#lollipop-popup-body").html("");b.detach()});c=b.data("__closeCallback");"function"===typeof c&&c.call(b[0]);$(window).off("keydown.lollipop");$(window).off("resize.lollipop");$(window).add("html, body").off("scroll.lollipop")};Object.freeze&&Object.freeze(Lollipop)})();
