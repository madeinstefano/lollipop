/*
 MIT <http://szanata.com/mit.txt>
 @license GPL <http://szanata.com/gpl.txt>
 @author St√©fano Stypulkowski <http://szanata.me>
 @version 1.0
 @require jquery 1.8+
 @compatible FF 3.5+
 @compatible Google Chrome 3+
 @compatible IE 6+
 @compatible Opera 10+
 @compatible Safari 5+
*/
var Lollipop=window.Lollipop={};
(function(){function e(c){var a={},b;for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a}function f(){var b=($(window).width()-$("#lollipop-popup").outerWidth())/2,a=($(window).height()-$("#lollipop-popup").outerHeight())/2;$("#lollipop-popup").css({left:0>b?0:b,top:0>a?0:a})}function g(){b.height(0).width(0).height($(document).height()<$(window).height()?$(window).height():$(document).height()).width($(document).width()<$(window).width()?$(window).width():$(document).width())}function h(c,a){b.find("#lollipop-popup-footer").append($("<button></button>").text(c).on("click",
a))}function i(){b.find("#lollipop-popup").css("padding-bottom",b.find("#lollipop-popup-footer:visible").size()?b.find("#lollipop-popup-footer").outerHeight(!0):0);g();f();$(window).add("html, body").scrollTop(0).scrollLeft(0).on("scroll.lollipop",function(){var c=b.find("#lollipop-popup").outerWidth(!0),a=b.find("#lollipop-popup").outerHeight(!0);c<$(window).width()?$(window).scrollLeft(0):c<$(window).width()+$(window).scrollLeft()&&$(window).scrollLeft(c-$(window).width());a<$(window).height()?
$(window).scrollTop(0):a<$(window).height()+$(window).scrollTop()&&$(window).scrollTop(a-$(window).height())});$(window).on("resize.lollipop",function(){g();f()})}var d={minWidth:400,maxWidth:500,width:null,minHeight:200,maxHeight:400,height:null,animate:!0,title:null,showHeader:!0,showFooter:!0,showCancelButton:!0,cancelButtonTitle:"Cancel",onCancel:null,content:null,buttons:[]},j=e(d),b=$("<div></div>").css({position:"absolute",top:"0px",left:"0px",right:"0px",zIndex:9999}).append($("<div></div>").css({position:"absolute",
top:"0px",bottom:"0px",left:"0px",right:"0px",opacity:".8",backgroundColor:"#000"}),$('<div id="lollipop-popup"></div>').css({maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:d.minHeight,position:"absolute"}).append($('<div id="lollipop-popup-header"></div>').css({textOverflow:"ellipsis",overflow:"hidden"}),$('<div id="lollipop-popup-body"></div>'),$('<div id="lollipop-popup-footer"></div>').css({position:"absolute",bottom:"0px",left:"0px",right:"0px"})));Object.freeze&&Object.freeze(d);
Lollipop.seeDefaults=function(){return e(d)};Lollipop.config=function(b){$.extend(j,d,b)};Lollipop.open=function(c){var a={};$.extend(a,j,c);b.find("#lollipop-popup").css({maxWidth:a.maxWidth||"auto",maxHeight:a.maxHeight||"auto",minWidth:a.minWidth||"auto",minHeight:a.minHeight||"auto",width:a.width||"auto",height:a.height||"auto"});a.showHeader&&a.title?b.find("#lollipop-popup-header").show().html(a.title):b.find("#lollipop-popup-header").hide();b.find("#lollipop-popup-body").html(a.content);if(!a.showFooter||
(!a.buttons||0===a.buttons.length)&&!a.showCancelButton)b.find("#lollipop-popup-footer").empty().hide();else{b.find("#lollipop-popup-footer").empty().show();if(a.buttons)for(var c=0,d=a.buttons.length;c<d;c++)h(a.buttons[c].title,a.buttons[c].click);a.showCancelButton&&(h(a.cancelButtonTitle,function(){if("function"===typeof a.onCancel)a.onCancel();Lollipop.close()}),$(window).on("keydown.lollipop",function(b){if(27===b.keyCode){if("function"===typeof a.onCancel)a.onCancel();Lollipop.close()}}))}b.hide().appendTo($("body"));
a.animate?(b.css("visibility","hidden").show(),i(),b.hide().css("visibility","visible").fadeIn()):(b.show(),i())};Lollipop.close=function(c){c?b.remove():b.fadeOut(function(){b.remove()});$(window).off("keydown.lollipop");$(window).off("resize.lollipop");$(window).add("html, body").off("scroll.lollipop")};Object.freeze&&Object.freeze(Lollipop)})();
