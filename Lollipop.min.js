var Lollipop=window.Lollipop={};(function(){function s(A){var y={};for(var z in A){if(A.hasOwnProperty(z)){y[z]=A[z]}}return y}function h(y){if(Object.freeze){Object.freeze(y)}}var f={minWidth:400,maxWidth:500,width:null,minHeight:200,maxHeight:400,height:null,animate:true,title:null,showHeader:true,showFooter:true,showCancelButton:true,cancelButtonTitle:"Cancel",onCancel:null,content:null,onBeforeOpen:null,onOpen:null,onClose:null,buttons:[]},l=s(f),n=$("<div></div>").css({position:"absolute",top:"0px",left:"0px",right:"0px",zIndex:9999}).append($('<div id="lollipop-block-layer"></div>').css({position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"}),$('<div id="lollipop-popup"></div>').css({maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:f.minHeight,position:"absolute"}).append($('<div id="lollipop-popup-header"></div>').css({textOverflow:"ellipsis",overflow:"hidden"}),$('<div id="lollipop-popup-body"></div>'),$('<div id="lollipop-popup-footer"></div>').css({position:"absolute",bottom:"0px",left:"0px",right:"0px"})));h(f);function o(){$(window).add("html, body").scrollTop(0).scrollLeft(0).on("scroll.lollipop",function(){var y=n.find("#lollipop-popup").outerWidth(true),z=n.find("#lollipop-popup").outerHeight(true);if(y<$(window).width()){$(window).scrollLeft(0)}else{if(y<$(window).width()+$(window).scrollLeft()){$(window).scrollLeft(y-$(window).width())}}if(z<$(window).height()){$(window).scrollTop(0)}else{if(z<$(window).height()+$(window).scrollTop()){$(window).scrollTop(z-$(window).height())}}})}function w(){var z=($(window).width()-$("#lollipop-popup").outerWidth())/2,y=($(window).height()-$("#lollipop-popup").outerHeight())/2;$("#lollipop-popup").css({left:(z<0)?0:z,top:(y<0)?0:y})}function a(){$(window).add("html, body").off("scroll.lollipop")}function r(){$(window).on("resize.lollipop",function(){p();w()})}function x(){$(window).off("resize.lollipop")}function p(){n.height(0).width(0).height(($(document).height()<$(window).height())?$(window).height():$(document).height()).width(($(document).width()<$(window).width())?$(window).width():$(document).width())}function q(y){n.find("#lollipop-popup-footer").append(y.href?$('<a class="button"></a>').text(y.title).attr({href:y.href,target:y.target?y.target:"_blank"}).on("click",y.click):$("<button></button>").text(y.title).on("click",y.click))}function t(y){$(window).on("keydown.lollipop",function(z){if(z.keyCode===27){if(typeof y.onCancel==="function"){y.onCancel()}Lollipop.close()}})}function c(){$(window).off("keydown.lollipop")}function b(z){if(!z.showFooter||((!z.buttons||z.buttons.length===0)&&!z.showCancelButton)){n.find("#lollipop-popup-footer").empty().hide()}else{n.find("#lollipop-popup-footer").empty().show();if(z.buttons){for(var A=0,y=z.buttons.length;A<y;A++){q(z.buttons[A])}}if(z.showCancelButton){q({title:z.cancelButtonTitle,click:function(){if(typeof z.onCancel==="function"){z.onCancel()}Lollipop.close()}});t(z)}}}function e(y){n.find("#lollipop-popup").css({maxWidth:y.maxWidth||"auto",maxHeight:y.maxHeight||"auto",minWidth:y.minWidth||"auto",minHeight:y.minHeight||"auto",width:y.width||"auto",height:y.height||"auto"})}function g(y){if(y.showHeader&&y.title){n.find("#lollipop-popup-header").show().html(y.title)}else{n.find("#lollipop-popup-header").hide()}}function j(){var y=$("<div></div>").css({clear:"both",width:0,height:0});n.find("#lollipop-popup-body").append(y)}function m(){n.find("#lollipop-popup").css("padding-bottom",n.find("#lollipop-popup-footer:visible").size()?n.find("#lollipop-popup-footer").outerHeight(true):0)}function d(){m();p();w();o();r()}function u(){return s(f)}Lollipop.seeDefaults=u;function v(y){$.extend(l,f,y)}Lollipop.config=v;function i(y){var z={};$.extend(z,l,y);g(z);n.find("#lollipop-popup-body").html("");n.find("#lollipop-popup-body").append(z.content);n.data("__closeCallback",z.onClose);e(z);j();b(z);n.hide().appendTo($("body"));if(typeof y.onBeforeOpen==="function"){y.onBeforeOpen.call(n[0])}if(z.animate){n.css("visibility","hidden").show(0,function(){d();n.hide().css("visibility","visible").fadeIn(function(){if(typeof y.onOpen==="function"){y.onOpen.call(this)}})})}else{n.show(0,function(){d();if(typeof y.onOpen==="function"){y.onOpen.call(this)}})}}Lollipop.open=i;function k(y){if(y){n.find("#lollipop-popup-body").html("");n.detach()}else{n.fadeOut(function(){n.find("#lollipop-popup-body").html("");n.detach()})}var z=n.data("__closeCallback");if(typeof z==="function"){z.call(n[0])}c();x();a()}Lollipop.close=k;h(Lollipop)})();